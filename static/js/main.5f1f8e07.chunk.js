(this["webpackJsonpgoit-react-hw-08-registration-and-login"]=this["webpackJsonpgoit-react-hw-08-registration-and-login"]||[]).push([[0],{36:function(t,e,n){"use strict";n.d(e,"g",(function(){return S})),n.d(e,"h",(function(){return q})),n.d(e,"a",(function(){return y})),n.d(e,"d",(function(){return I})),n.d(e,"c",(function(){return z})),n.d(e,"f",(function(){return W})),n.d(e,"e",(function(){return D})),n.d(e,"b",(function(){return F}));var r,c,o=n(14),u=n.n(o),a=n(19),s=n(13),i=n.n(s),b=n(2),d=Object(b.b)("todos/fetchTodosRequest"),l=Object(b.b)("todos/fetchTodosSuccess"),j=Object(b.b)("todos/fetchTodosError"),f=Object(b.b)("todos/addTodoRequest"),O=Object(b.b)("todos/addTodoSuccess"),g=Object(b.b)("todos/addTodoError"),h=Object(b.b)("todos/deleteTodoRequest"),p=Object(b.b)("todos/deleteTodoSuccess"),v=Object(b.b)("todos/deleteTodoError"),x=Object(b.b)("todos/toggleCompletedRequest"),m=Object(b.b)("todos/toggleCompletedSuccess"),k=Object(b.b)("todos/toggleCompletedError"),y=Object(b.b)("todos/changeFilter"),S={fetchTodos:function(){return function(){var t=Object(a.a)(u.a.mark((function t(e){var n,r;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e(d()),t.prev=1,t.next=4,i.a.get("/tasks");case 4:n=t.sent,r=n.data,e(l(r)),t.next=12;break;case 9:t.prev=9,t.t0=t.catch(1),e(j(t.t0.massage));case 12:case"end":return t.stop()}}),t,null,[[1,9]])})));return function(e){return t.apply(this,arguments)}}()},addTodo:function(t){return function(e){var n={description:t,completed:!1};e(f()),i.a.post("/tasks",n).then((function(t){var n=t.data;return e(O(n))})).catch((function(t){return e(g(t.massage))}))}},deleteTodo:function(t){return function(e){e(h()),i.a.delete("/tasks/".concat(t)).then((function(){return e(p(t))})).catch((function(t){return e(v(t.massage))}))}},toggleCompleted:function(t){var e=t.id,n=t.completed;return function(t){var r={completed:n};t(x()),i.a.patch("/tasks/".concat(e),r).then((function(e){var n=e.data;return t(m(n))})).catch((function(e){return t(k(e.massage))}))}}},C=n(3),E=n(26),A=n(6),w=Object(b.c)([],(r={},Object(C.a)(r,l,(function(t,e){return e.payload})),Object(C.a)(r,O,(function(t,e){var n=e.payload;return[].concat(Object(E.a)(t),[n])})),Object(C.a)(r,p,(function(t,e){var n=e.payload;return t.filter((function(t){return t.id!==n}))})),Object(C.a)(r,m,(function(t,e){var n=e.payload;return t.map((function(t){return t.id===n.id?n:t}))})),r)),T=Object(b.c)(!1,(c={},Object(C.a)(c,d,(function(){return!0})),Object(C.a)(c,l,(function(){return!1})),Object(C.a)(c,j,(function(){return!1})),Object(C.a)(c,f,(function(){return!0})),Object(C.a)(c,O,(function(){return!1})),Object(C.a)(c,g,(function(){return!1})),Object(C.a)(c,h,(function(){return!0})),Object(C.a)(c,p,(function(){return!1})),Object(C.a)(c,v,(function(){return!1})),Object(C.a)(c,x,(function(){return!0})),Object(C.a)(c,m,(function(){return!1})),Object(C.a)(c,k,(function(){return!1})),c)),R=Object(b.c)("",Object(C.a)({},y,(function(t,e){return e.payload}))),U=Object(b.c)(null,{}),q=Object(A.c)({items:w,filter:R,loading:T,error:U}),L=n(24),I=function(t){return t.todos.loading},z=function(t){return t.todos.filter},B=function(t){return t.todos.items},W=Object(L.a)([B,z],(function(t,e){console.log("\u0421\u043e\u0441\u0442\u0430\u0432\u043b\u044f\u044e \u043d\u043e\u0432\u044b\u0439 \u043c\u0430\u0441\u0441\u0438\u0432 \u0432\u0438\u0434\u0438\u043c\u044b\u0445 \u0442\u0443\u0434\u0443");var n=e.toLowerCase();return t.filter((function(t){return t.description.toLowerCase().includes(n)}))})),D=function(t){return B(t).length},F=Object(L.a)([B],(function(t){return console.log("\u0412\u044b\u0441\u0447\u0438\u0442\u044b\u0432\u0430\u044e \u043d\u043e\u0432\u043e\u0435 \u043a\u043e\u043b\u0432\u043e \u043a\u043e\u043c\u043f\u043b\u0438\u0442\u0435\u0434 \u0442\u0443\u0434\u0443\u0437"),t.reduce((function(t,e){return e.completed?t+1:t}),0)}))},46:function(t,e,n){"use strict";n.d(e,"b",(function(){return u}));var r=n(3),c=n(2),o=n(6),u=Object(c.b)("counter/add"),a=Object(c.c)(0,Object(r.a)({},u,(function(t,e){return t+1})));e.a=Object(o.c)({value:a})},47:function(t,e,n){"use strict";n.d(e,"a",(function(){return c}));n(0),n(81);var r=n(1),c=function(t){var e=t.children;return Object(r.jsx)("div",{className:"Container",children:e})}},7:function(t,e,n){"use strict";n.d(e,"a",(function(){return h})),n.d(e,"f",(function(){return C})),n.d(e,"d",(function(){return E})),n.d(e,"e",(function(){return A})),n.d(e,"c",(function(){return w})),n.d(e,"b",(function(){return T}));var r,c,o,u,a=n(2),s={registerRequest:Object(a.b)("auth/registerRequest"),registerSuccess:Object(a.b)("auth/registerSuccess"),registerError:Object(a.b)("auth/registerError"),loginRequest:Object(a.b)("auth/loginRequest"),loginSuccess:Object(a.b)("auth/loginSuccess"),loginError:Object(a.b)("auth/loginError"),logoutRequest:Object(a.b)("auth/logoutRequest"),logoutSuccess:Object(a.b)("auth/logoutSuccess"),logoutError:Object(a.b)("auth/logoutError"),getCurrentUserRequest:Object(a.b)("auth/getCurrentUserRequest"),getCurrentUserSuccess:Object(a.b)("auth/getCurrentUserSuccess"),getCurrentUserError:Object(a.b)("auth/getCurrentUserError")},i=n(3),b=n(6),d={name:null,email:null},l=Object(a.c)(d,(r={},Object(i.a)(r,s.registerSuccess,(function(t,e){return e.payload.user})),Object(i.a)(r,s.loginSuccess,(function(t,e){return e.payload.user})),Object(i.a)(r,s.logoutSuccess,(function(){return d})),Object(i.a)(r,s.getCurrentUserSuccess,(function(t,e){return e.payload})),r)),j=Object(a.c)(null,(c={},Object(i.a)(c,s.registerSuccess,(function(t,e){return e.payload.token})),Object(i.a)(c,s.loginSuccess,(function(t,e){return e.payload.token})),Object(i.a)(c,s.logoutSuccess,(function(){return null})),c)),f=function(t,e){return e.payload},O=Object(a.c)(null,(o={},Object(i.a)(o,s.registerError,f),Object(i.a)(o,s.loginError,f),Object(i.a)(o,s.logoutError,f),Object(i.a)(o,s.getCurrentUserError,f),o)),g=Object(a.c)(!1,(u={},Object(i.a)(u,s.registerSuccess,(function(){return!0})),Object(i.a)(u,s.loginSuccess,(function(){return!0})),Object(i.a)(u,s.getCurrentUserSuccess,(function(){return!0})),Object(i.a)(u,s.registerError,(function(){return!1})),Object(i.a)(u,s.loginError,(function(){return!1})),Object(i.a)(u,s.getCurrentUserError,(function(){return!1})),Object(i.a)(u,s.logoutSuccess,(function(){return!1})),u)),h=Object(b.c)({user:l,isAuthenticated:g,token:j,error:O}),p=n(14),v=n.n(p),x=n(19),m=n(13),k=n.n(m);k.a.defaults.baseURL="https://lpj-tasker.herokuapp.com";var y=function(t){k.a.defaults.headers.common.Authorization="Bearer ".concat(t)},S=function(){k.a.defaults.headers.common.Authorization=""},C=function(t){return function(){var e=Object(x.a)(v.a.mark((function e(n){var r;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n(s.registerRequest()),e.prev=1,e.next=4,k.a.post("/users/signup",t);case 4:r=e.sent,y(r.data.token),n(s.registerSuccess(r.data)),e.next=13;break;case 9:e.prev=9,e.t0=e.catch(1),console.log(e.t0),n(s.registerError(e.t0.message));case 13:case"end":return e.stop()}}),e,null,[[1,9]])})));return function(t){return e.apply(this,arguments)}}()},E=function(t){return function(){var e=Object(x.a)(v.a.mark((function e(n){var r;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n(s.loginRequest()),e.prev=1,e.next=4,k.a.post("/users/login",t);case 4:r=e.sent,y(r.data.token),n(s.loginSuccess(r.data)),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(1),n(s.loginError(e.t0.message));case 12:case"end":return e.stop()}}),e,null,[[1,9]])})));return function(t){return e.apply(this,arguments)}}()},A=function(){return function(){var t=Object(x.a)(v.a.mark((function t(e){return v.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e(s.logoutRequest()),t.prev=1,t.next=4,k.a.post("/users/logout");case 4:S(),e(s.logoutSuccess()),t.next=11;break;case 8:t.prev=8,t.t0=t.catch(1),e(s.logoutError(t.t0.message));case 11:case"end":return t.stop()}}),t,null,[[1,8]])})));return function(e){return t.apply(this,arguments)}}()},w=function(){return function(){var t=Object(x.a)(v.a.mark((function t(e,n){var r,c,o;return v.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r=n(),c=r.auth.token){t.next=3;break}return t.abrupt("return");case 3:return y(c),e(s.getCurrentUserRequest()),t.prev=5,t.next=8,k.a.get("/users/current");case 8:o=t.sent,e(s.getCurrentUserSuccess(o.data)),t.next=15;break;case 12:t.prev=12,t.t0=t.catch(5),e(s.getCurrentUserError(t.t0.message));case 15:case"end":return t.stop()}}),t,null,[[5,12]])})));return function(e,n){return t.apply(this,arguments)}}()},T={getIsAuthenticated:function(t){return t.auth.isAuthenticated},getUserName:function(t){return t.auth.user.name}}},81:function(t,e,n){},84:function(t,e,n){},85:function(t,e,n){"use strict";n.r(e);var r=n(0),c=n.n(r),o=n(22),u=n.n(o),a=n(16),s=n(8),i=n(49),b=n(33),d=n(34),l=n(37),j=n(35),f=n(5),O=n(7),g=n(1),h={link:{display:"inline-block",textDecoration:"none",padding:12,fontWeight:700,color:"#2A363B"},activeLink:{color:"#E84A5F"}},p=Object(s.b)((function(t){return{isAuthenticated:O.b.getIsAuthenticated(t)}}))((function(t){t.isAuthenticates;return Object(g.jsxs)("nav",{children:[Object(g.jsx)(a.b,{to:"/",exact:!0,style:h.link,activeStyle:h.activeLink,children:"\u0413\u043b\u0430\u0432\u043d\u0430\u044f"}),Object(g.jsx)(a.b,{to:"/todos",exact:!0,style:h.link,activeStyle:h.activeLink,children:"\u0417\u0430\u043c\u0435\u0442\u043a\u0438"})]})})),v=n.p+"static/media/default-avatar.e44fc4e2.png",x={container:{display:"flex",alignItems:"center"},avatar:{marginRight:4},name:{fontWeight:700,marginRight:12}},m={onLogout:O.e},k=Object(s.b)((function(t){return{name:O.b.getUserName(t),avatar:v}}),m)((function(t){var e=t.avatar,n=t.name,r=t.onLogout;return Object(g.jsxs)("div",{style:x.container,children:[Object(g.jsx)("img",{src:e,alt:"",width:"32",style:x.avatar}),Object(g.jsxs)("span",{style:x.name,children:["Welcome, ",n]}),Object(g.jsx)("button",{type:"button",onClick:r,children:"Logout"})]})})),y={link:{display:"inline-block",textDecoration:"none",padding:12,fontWeight:700,color:"#2A363B"},activeLink:{color:"#E84A5F"}},S=function(){return Object(g.jsxs)("div",{children:[Object(g.jsx)(a.b,{to:"/register",exact:!0,style:y.link,activeStyle:y.activeLink,children:"\u0420\u0435\u0433\u0438\u0441\u0442\u0440\u0430\u0446\u0438\u044f"}),Object(g.jsx)(a.b,{to:"/login",exact:!0,style:y.link,activeStyle:y.activeLink,children:"\u041b\u043e\u0433\u0438\u043d"})]})},C={header:{display:"flex",justifyContent:"space-between",alignItems:"center",borderBottom:"1px solid #2A363B"}},E=Object(s.b)((function(t){return{isAuthenticated:O.b.getIsAuthenticated(t)}}))((function(t){var e=t.isAuthenticated;return Object(g.jsxs)("header",{style:C.header,children:[Object(g.jsx)(p,{}),e?Object(g.jsx)(k,{}):Object(g.jsx)(S,{})]})})),A=n(47),w=n(18),T=n(25),R=Object(s.b)((function(t){return{isAuthenticated:O.b.getIsAuthenticated(t)}}))((function(t){var e=t.component,n=t.isAuthenticated,r=t.redirectTo,c=Object(T.a)(t,["component","isAuthenticated","redirectTo"]);return Object(g.jsx)(f.b,Object(w.a)(Object(w.a)({},c),{},{render:function(t){return n?Object(g.jsx)(e,Object(w.a)({},t)):Object(g.jsx)(f.a,{to:r})}}))})),U=Object(s.b)((function(t){return{isAuthenticated:O.b.getIsAuthenticated(t)}}))((function(t){var e=t.component,n=t.isAuthenticated,r=t.redirectTo,c=Object(T.a)(t,["component","isAuthenticated","redirectTo"]);return Object(g.jsx)(f.b,Object(w.a)(Object(w.a)({},c),{},{render:function(t){return n&&c.restricted?Object(g.jsx)(f.a,{to:r}):Object(g.jsx)(e,Object(w.a)({},t))}}))})),q=Object(r.lazy)((function(){return n.e(4).then(n.bind(null,93))})),L=Object(r.lazy)((function(){return n.e(3).then(n.bind(null,96))})),I=Object(r.lazy)((function(){return n.e(6).then(n.bind(null,94))})),z=Object(r.lazy)((function(){return n.e(5).then(n.bind(null,95))})),B=function(t){Object(l.a)(n,t);var e=Object(j.a)(n);function n(){return Object(b.a)(this,n),e.apply(this,arguments)}return Object(d.a)(n,[{key:"componentDidMount",value:function(){this.props.onGetCurrentUser()}},{key:"render",value:function(){return Object(g.jsxs)(A.a,{children:[Object(g.jsx)(E,{}),Object(g.jsx)(r.Suspense,{fallback:Object(g.jsx)("p",{children:"\u0417\u0430\u0433\u0440\u0443\u0436\u0430\u0435\u043c..."}),children:Object(g.jsxs)(f.d,{children:[Object(g.jsx)(U,{exact:!0,path:"/",component:q}),Object(g.jsx)(U,{path:"/register",restricted:!0,redirectTo:"/todos",component:I}),Object(g.jsx)(U,{path:"/login",restricted:!0,redirectTo:"/todos",component:z}),Object(g.jsx)(R,{path:"/todos",component:L,redirectTo:"/login"})]})})]})}}]),n}(r.Component),W={onGetCurrentUser:O.c},D=Object(s.b)(null,W)(B),F=n(26),N=n(2),G=n(50),J=n.n(G),M=n(17),H=n(51),K=n.n(H),P=n(36),Q=n(46),V=[].concat(Object(F.a)(Object(N.d)({serializableCheck:{ignoredActions:[M.a,M.f,M.b,M.c,M.d,M.e]}})),[function(t){return function(t){return function(e){console.log("\u041c\u043e\u044f \u043f\u0440\u043e\u0441\u043b\u043e\u0439\u043a\u0430",e),t(e)}}},J.a]),X={key:"auth",storage:K.a,whitelist:"token"},Y=Object(N.a)({reducer:{auth:Object(M.g)(X,O.a),todos:P.h,counter:Q.a},middleware:V,devTools:!1}),Z={store:Y,persistor:Object(M.h)(Y)};n(84);u.a.render(Object(g.jsx)(c.a.StrictMode,{children:Object(g.jsx)(s.a,{store:Z.store,children:Object(g.jsx)(i.a,{loading:null,persistor:Z.persistor,children:Object(g.jsx)(a.a,{children:Object(g.jsx)(D,{})})})})}),document.getElementById("root"))}},[[85,1,2]]]);
//# sourceMappingURL=main.5f1f8e07.chunk.js.map